# 📸 Парсер фото из Telegram-канала

Этот проект позволяет скачивать **фотографии** из канала Telegram, а также автоматически загружать фотографии с **telegra.ph**, если ссылки на них встречаются в сообщениях.
Работает через **Pyrogram**.

---

## 📂 Структура проекта
📂 Парсер фото/

├─ 📄 backup.py # основной скрипт (скачивание фото из канала)

├─ 📄 config.py # настройки (API_ID, API_HASH, SESSION_NAME, DOWNLOAD_DIR)

├─ 📄 auth.py # отдельный скрипт для авторизации / создания .session

├─ 📂 downloads/ # сюда сохраняются все скачанные фотографии

└─ 📄 <SESSION_NAME>.session # файл сессии (создаётся автоматически)

---

## ⚙️ Установка и запуск

1. Установка зависимостей:

```bash
pip install -r requirements.txt
```

2. Создай приложение в my.telegram.org → **API Development tools**.

3. Настрой config.py, указав свои данные:

```python
API_ID = 123456
API_HASH = "your_api_hash"
SESSION_NAME = "backup_session"
DOWNLOAD_DIR = "downloads"
```

4. Авторизуйся в Telegram, чтобы создать сессию:

```bash
python auth.py
```

5. Запусти основной скрипт:
```bash
python backup.py
```

---

## 🚀 Возможности

1. 📥 Скачивание **фотографий** из канала.

2. 🔗 Поиск **ссылок на telegra.ph** в сообщениях, подписях, гиперссылках и кнопках.

3. 📑 Автоматическая загрузка всех картинок с Telegraph-страниц (включая вложенные ссылки).

4. 📊 Подсчёт общего количества сообщений в канале перед скачиванием.

---

## 📖 Пример работы

```less
Telegram Backup
┏━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Параметр   ┃ Описание                                ┃
┡━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩
│ Channel ID │ Укажи ID канала (@channel или -100xxxx) │
│ Limit      │ Сколько сообщений скачать (снизу вверх) │
└────────────┴─────────────────────────────────────────┘
Введи ID канала: -1002810315864
Всего сообщений в канале: 1403
Сколько сообщений скачать?: 40
```

---

## 📝 Примечания

1. Работает только в **публичных и приватных каналах**, где у аккаунта есть доступ.

2. Все скачанные фото по умолчанию сохраняются в папку `downloads/`.

3. Если в сообщении встречается ссылка на **Telegraph**, скрипт рекурсивно загружает все картинки с этой страницы.

4. Поддерживаются гиперссылки и inline-кнопки с `telegra.ph`.

---

## 💡 Полезные команды

1. Удалить старую сессию и авторизоваться заново:

```bash
rm *.session
python auth.py
```

2. Сменить папку для загрузки — отредактируй `DOWNLOAD_DIR` в `config.py`.

---

## ✍️ Автор: **TimeDavid0112**

---
